### 前端的性能优化

前端页面的流畅跟js线程是否阻塞相关，因为页面只有一个js线程，负责所有的js代码执行、页面的渲染等工作，所以如果某个任务长时间执行或组件渲染很频繁都可能导致帧率下降，降低流畅。

故而性能优化的排查一般从几个方面进行：

１，借助chrome浏览器的performance录制页面的运行数据，看是否出现某些任务占用时长较，以及是否出现一些特殊时段，比如浏览器的实验性特性如commit阶段有时候会在每帧渲染期间占用时长较多；

２，通过埋点代码，统计不同任务在运行期间的总耗时以及每帧的阶段耗时，进而可以从数据层面将影响大的任务识别出来，然后针对优化；



优化方案一般有：

１，将一些不需要同步执行且已产生影响的代码放入worker中进行，如果是图像等buffer数据，更可借助worker的transfer特性加快线程间的数据传递；

２，频繁执行的数据对象考虑使用缓存策略避免每次都从头计算一遍，避免内存泄露可以加上定期清理机制；

３，渲染类数据合并，将多个小对象合并成一个来一次性渲染，如3d中的mesh，将大量同性质的数据先合并　再创建出一个mesh;或者用instanceMesh创建，如点云等大量同类mesh;
- 参考`前端/line`那一章

４，一些需要高频更新的监听数据变化的组件有时候可能直接使用原生的`innerHtml`方式更快，一味的利用响应式数据监听可能不是最优方法；

5,　某些3D元素用shader实现；